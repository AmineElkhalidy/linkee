import{k as pe,q as ge,l as ve,m as be,n as we,e as ke,a as W}from"../chunks/firebase.-yoiMsiN.js";import{H as xe}from"../chunks/control.pJ1mnnAb.js";import{s as Ee,v as ye,p as Pe,A as Le,g as b,c as A,l as O,q as je,h as w,d as C,i as D,m as B,H as De,k,J as ie,G as Re}from"../chunks/scheduler.9Ql2hydF.js";import{S as Ue,i as qe,d as ee,p as ce,v as Se,e as p,g as f,n as m,a as ue,s as de,b as V,c as Te,t as X,j as Ae,k as Ce,m as Ne,l as He,h as Ie}from"../chunks/index.4xqnpTo_.js";import{g as Me,a as Oe}from"../chunks/spread.rEx3vLA9.js";import{U as he}from"../chunks/UserLink.RXevY2_S.js";function me(t,e){throw isNaN(t)||t<400||t>599?new Error(`HTTP error status codes must be between 400 and 599 â€” ${t} is invalid`):new xe(t,e)}new TextEncoder;const Be=async({params:t})=>{const e=pe(ke,"users"),u=ge(e,be("username","==",t.username),ve(1)),d=await we(u),h=d.docs[0]?.exists(),a=d.docs[0]?.data();if(!h)throw me(404,"That user does not exist in our database!");if(!a.published)throw me(403,`The profile of @${a.username} is not public!`);return{username:a.username,photoURL:a.photoURL,bio:a.bio,links:a.links??[]}},Qe=Object.freeze(Object.defineProperty({__proto__:null,load:Be},Symbol.toStringTag,{value:"Module"})),x="C:/Users/amine/Desktop/Learning/svelte/linke-tree/src/routes/[username]/+page.svelte";function fe(t,e,u){const d=t.slice();return d[3]=e[u],d}function Z(t){let e,u;const d=[t[3]];let h={};for(let c=0;c<d.length;c+=1)h=Le(h,d[c]);e=new he({props:h,$$inline:!0});const a={c:function(){Ae(e.$$.fragment)},l:function(l){Ce(e.$$.fragment,l)},m:function(l,g){Ne(e,l,g),u=!0},p:function(l,g){const i=g&1?Me(d,[Oe(l[3])]):{};e.$set(i)},i:function(l){u||(V(e.$$.fragment,l),u=!0)},o:function(l){X(e.$$.fragment,l),u=!1},d:function(l){He(e,l)}};return ee("SvelteRegisterBlock",{block:a,id:Z.name,type:"each",source:"(34:6) {#each data.links as item}",ctx:t}),a}function $(t){let e,u,d,h,a,c,l,g=t[0].username+"",i,G,R,v,H,z,U,N=(t[0].bio??"No bio yet...")+"",I,J,P,L,te="Your social links:",Y,j,F,q,y,K,E;document.title=d="@"+t[0].username+" Links";let S=ce(t[0].links),s=[];for(let _=0;_<S.length;_+=1)s[_]=Z(fe(t,S,_));const _e=_=>X(s[_],1,1,()=>{s[_]=null}),ne={c:function(){e=b("meta"),h=A(),a=b("main"),c=b("h1"),l=O("@"),i=O(g),G=A(),R=b("div"),v=b("img"),z=A(),U=b("p"),I=O(N),J=A(),P=b("div"),L=b("p"),L.textContent=te,Y=A(),j=b("ul");for(let o=0;o<s.length;o+=1)s[o].c();F=A(),q=b("div"),y=b("a"),K=O("Add a Link"),this.h()},l:function(o){const r=je("svelte-kxq3ok",document.head);e=w(r,"META",{name:!0,content:!0}),r.forEach(p),h=C(o),a=w(o,"MAIN",{class:!0});var n=D(a);c=w(n,"H1",{class:!0});var T=D(c);l=B(T,"@"),i=B(T,g),T.forEach(p),G=C(n),R=w(n,"DIV",{class:!0});var ae=D(R);v=w(ae,"IMG",{src:!0,alt:!0,width:!0,class:!0}),ae.forEach(p),z=C(n),U=w(n,"P",{class:!0});var se=D(U);I=B(se,N),se.forEach(p),J=C(n),P=w(n,"DIV",{});var M=D(P);L=w(M,"P",{class:!0,"data-svelte-h":!0}),De(L)!=="svelte-1w37t3"&&(L.textContent=te),Y=C(M),j=w(M,"UL",{class:!0});var oe=D(j);for(let Q=0;Q<s.length;Q+=1)s[Q].l(oe);oe.forEach(p),M.forEach(p),F=C(n),q=w(n,"DIV",{class:!0});var re=D(q);y=w(re,"A",{href:!0,class:!0});var le=D(y);K=B(le,"Add a Link"),le.forEach(p),re.forEach(p),n.forEach(p),this.h()},h:function(){f(e,"name","description"),f(e,"content",u=t[0].bio),k(e,x,11,2,207),f(c,"class","text-5xl sm:text-6xl md:text-7xl text-purple-500"),k(c,x,16,2,364),ie(v.src,H=t[0].photoURL??"/profile.webp")||f(v,"src",H),f(v,"alt","Pic URL"),f(v,"width","256"),f(v,"class","mx-auto rounded-full border border-purple-500"),k(v,x,21,4,486),f(R,"class","my-6"),k(R,x,20,2,462),f(U,"class","text-lg sm:text-xl my-8 text-white"),k(U,x,29,2,661),f(L,"class","text-lg mb-2"),k(L,x,34,4,767),f(j,"class","list-none mb-6 flex flex-col justify-center items-center gap-4"),k(j,x,35,4,819),k(P,x,33,2,756),f(y,"href",t[1]),f(y,"class","btn btn-outline btn-info mx-auto my-4 px-10"),k(y,x,43,4,1059),f(q,"class","flex justify-center items-center mb-8"),k(q,x,42,2,1002),f(a,"class","prose text-center mx-auto mt-16"),k(a,x,15,0,314)},m:function(o,r){m(document.head,e),ue(o,h,r),ue(o,a,r),m(a,c),m(c,l),m(c,i),m(a,G),m(a,R),m(R,v),m(a,z),m(a,U),m(U,I),m(a,J),m(a,P),m(P,L),m(P,Y),m(P,j);for(let n=0;n<s.length;n+=1)s[n]&&s[n].m(j,null);m(a,F),m(a,q),m(q,y),m(y,K),E=!0},p:function(o,[r]){if((!E||r&1&&u!==(u=o[0].bio))&&f(e,"content",u),(!E||r&1)&&d!==(d="@"+o[0].username+" Links")&&(document.title=d),(!E||r&1)&&g!==(g=o[0].username+"")&&de(i,g),(!E||r&1&&!ie(v.src,H=o[0].photoURL??"/profile.webp"))&&f(v,"src",H),(!E||r&1)&&N!==(N=(o[0].bio??"No bio yet...")+"")&&de(I,N),r&1){S=ce(o[0].links);let n;for(n=0;n<S.length;n+=1){const T=fe(o,S,n);s[n]?(s[n].p(T,r),V(s[n],1)):(s[n]=Z(T),s[n].c(),V(s[n],1),s[n].m(j,null))}for(Ie(),n=S.length;n<s.length;n+=1)_e(n);Te()}(!E||r&2)&&f(y,"href",o[1])},i:function(o){if(!E){for(let r=0;r<S.length;r+=1)V(s[r]);E=!0}},o:function(o){s=s.filter(Boolean);for(let r=0;r<s.length;r+=1)X(s[r]);E=!1},d:function(o){o&&(p(h),p(a)),p(e),Re(s,o)}};return ee("SvelteRegisterBlock",{block:ne,id:$.name,type:"component",source:"",ctx:t}),ne}function Ve(t,e,u){let d,h;ye(W,"userData"),Pe(t,W,i=>u(2,h=i));let{$$slots:a={},$$scope:c}=e;Se("Page",a,[]);let{data:l}=e;t.$$.on_mount.push(function(){l===void 0&&!("data"in e||t.$$.bound[t.$$.props.data])&&console.warn("<Page> was created without expected prop 'data'")});const g=["data"];return Object.keys(e).forEach(i=>{!~g.indexOf(i)&&i.slice(0,2)!=="$$"&&i!=="slot"&&console.warn(`<Page> was created with unknown prop '${i}'`)}),t.$$set=i=>{"data"in i&&u(0,l=i.data)},t.$capture_state=()=>({UserLink:he,userData:W,data:l,href:d,$userData:h}),t.$inject_state=i=>{"data"in i&&u(0,l=i.data),"href"in i&&u(1,d=i.href)},e&&"$$inject"in e&&t.$inject_state(e.$$inject),t.$$.update=()=>{t.$$.dirty&4&&u(1,d=`/${h?.username}/edit`)},[l,d,h]}class We extends Ue{constructor(e){super(e),qe(this,e,Ve,$,Ee,{data:0}),ee("SvelteRegisterComponent",{component:this,tagName:"Page",options:e,id:$.name})}get data(){throw new Error("<Page>: Props cannot be read directly from the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}set data(e){throw new Error("<Page>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}}export{We as component,Qe as universal};
